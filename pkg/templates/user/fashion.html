{% extends 'user/other.html'%}   
{% block body %}

     
{% for message in get_flashed_messages() %}

<div class="alert alert-success alert-dismissible fade show" role="alert" style="margin-top: 5px;">
    <strong>{{ message }}</strong>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}
    <div class="container-fluid sub-nav">
        <div class="">
            <div class="card-body ban ">
              Fashion
            </div>
          </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col d-flex">
                <h5><a href="/" class="text-warning">Home</a></h5><span>>Fashion</span>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row p-5">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <div class="card card-big">
                    <div class="card-body d-flex ">
                        <div class="container">
                            <div class="row g-3">
                                {% for product in products %}
                                <div class="col-6 col-md-4 col-lg-3">
                                    <div class="card h-100 shadow-sm caer">
                                        <!-- Product Image -->
                                        <a href="/details/{{ product.product_id }}/">
                                            <img 
                                                src="{{ url_for('static', filename='media/' + product.pro_picture) }}" 
                                                class="card-img-top img-fluid" 
                                                alt="{{ product.pro_name or 'Product Image' }}">
                                        </a>
                        
                                        <!-- Product Details -->
                                        <div class="card-body d-flex flex-column">
                                            <!-- Product Name -->
                                            <h6 class="card-title text-truncate">
                                                {{ product.pro_name or 'Unnamed Product' }}
                                            </h6>
                        
                                            <!-- Product Prices -->
                                            <div class="mb-2">
                                                {% if product.old_price %}
                                                <strike class="text-muted text-decoration-line-through d-block">
                                                    ${{ product.old_price }}
                                                </strike>
                                                {% endif %}
                                                <span class="fw-bold text-success">
                                                    ${{ product.new_price or 'N/A' }}
                                                </span>
                                            </div>
                        
                                            <!-- Add to Cart Button -->
                                            
                                            {% set in_cart = product.product_id in cart_items | map(attribute='product_id') %}
                                            <div class="mt-auto">
                                                <button 
                                                    class="btn btn-warning w-100 rounded-4 px-3 do" 
                                                    data-product-id="{{ product.product_id }}">
                                                    <i class="fa fa-cart-plus me-2"></i>
                                                    Add to Cart
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        
                </div>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>
    
    

                
</div>
{% endblock %}

    